{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Hero Carousel -->
<div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="5000">
  <div class="carousel-inner">
    <div class="carousel-item active position-relative">
      <img src="{% static 'images/home11.jpg' %}" class="d-block w-100" alt="Clear Vision" style="max-height: 600px; object-fit: cover;">
      <div class="carousel-caption d-none d-md-block animate__animated animate__fadeInUp">
        <h1 class="display-5 fw-bold text-info">See Clearly, Live Fully</h1>
        <p class="lead">Discover eyewear that blends precision with personality.</p>
        <a href="{% url 'contactPage' %}" class="btn btn-info text-white px-4 py-2 rounded-pill mt-2 shadow">Book Appointment</a>
      </div>
      <div class="carousel-overlay"></div>
    </div>
    <div class="carousel-item position-relative">
      <img src="{% static 'images/home2.jpg' %}" class="d-block w-100" alt="Lens Innovation" style="max-height: 600px; object-fit: cover;">
      <div class="carousel-caption d-none d-md-block animate__animated animate__fadeInUp">
        <h1 class="display-5 fw-bold text-info">Next-Gen Lens Technology</h1>
        <p class="lead">Explore lenses that adapt to your lifestyle.</p>
        <a href="{% url 'aboutPage' %}" class="btn btn-info text-white px-4 py-2 rounded-pill mt-2 shadow">Learn More</a>
      </div>
      <div class="carousel-overlay"></div>
    </div>
    <div class="carousel-item position-relative">
      <img src="{% static 'images/home3.jpg' %}" class="d-block w-100" alt="Trusted Eye Care" style="max-height: 600px; object-fit: cover;">
      <div class="carousel-caption d-none d-md-block animate__animated animate__fadeInUp">
        <h1 class="display-5 fw-bold text-info">Trusted Eye Care Experts</h1>
        <p class="lead">Your vision is our priority — from diagnosis to frames.</p>
        <a href="{% url 'register' %}" class="btn btn-info text-white px-4 py-2 rounded-pill mt-2 shadow">Get Started</a>
      </div>
      <div class="carousel-overlay"></div>
    </div>
  </div>

  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon bg-dark rounded-circle" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon bg-dark rounded-circle" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- Hero Overlay and Animations -->
<style>
.carousel-caption {
  z-index: 2;
}
.carousel-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1;
}
@media (max-width: 767px) {
  .carousel-item .col-12 {
    flex: 0 0 100% !important;
    max-width: 100%;
  }
}
.fade-in {
  animation: fadeIn 1s ease-in;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>

<!-- Featured Products Carousel -->
<section style="padding: 3rem 0; background-color: #000; color: white;">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" style="color: #00bcd4;">Featured Products</h2>

    <div id="featuredCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000" data-bs-pause="hover">
      <div class="carousel-inner">
        {% for item in items %}
        {% if forloop.counter0|divisibleby:3 %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="row justify-content-center flex-nowrap">
        {% endif %}

            <div class="col-12 col-md-6 col-lg-4 d-flex justify-content-center" style="flex: 0 0 auto;">
              <div class="card text-white shadow-lg m-2"
                   style="width: 18rem; background-color: #111; border: 1px solid #00bcd4; border-radius: 12px; transition: transform 0.3s ease, box-shadow 0.3s ease;"
                   onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 10px 20px rgba(0,0,0,0.5)'"
                   onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 6px rgba(0,0,0,0.3)'">
                
                <div style="overflow: hidden; border-top-left-radius: 12px; border-top-right-radius: 12px;">
                  <img src="{{ item.item_image.url }}" class="card-img-top"
                       alt="{{ item.item_name }}"
                       title="{{ item.item_description }}"
                       style="height: 250px; object-fit: cover; transition: transform 0.4s ease;"
                       onmouseover="this.style.transform='scale(1.1)'"
                       onmouseout="this.style.transform='scale(1)'">
                </div>

                <div class="card-body d-flex flex-column text-center p-3">
                  <h5 class="card-title mb-1" style="font-weight: bold; font-size: 1.2rem;">{{ item.item_name }}</h5>

                  <!-- ✅ Price prominently displayed -->
                  <p class="card-text mb-2" style="color: #00ffc8; font-size: 1.1rem;">€{{ item.item_price }}</p>

                  <a href="{% url 'detailitemPage' item.pk %}" class="btn text-white mt-2"
                     style="background-color: #00bcd4; border-radius: 20px;">
                    View Details
                  </a>
                </div>
              </div>
            </div>

        {% if forloop.counter|divisibleby:3 or forloop.last %}
          </div>
        </div>
        {% endif %}
        {% endfor %}
      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#featuredCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" style="background-color: #00bcd4; border-radius: 50%; padding: 15px;" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#featuredCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" style="background-color: #00bcd4; border-radius: 50%; padding: 15px;" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
</section>

<!-- Categories Section -->
<section class="py-5" style="background-color: #111;">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" style="color: #00bcd4;">Browse by Category</h2>
    <div class="row g-4">
      {% for category in categories %}
      <div class="col-12 col-md-6 col-lg-4">
        <div style="
          position: relative;
          height: 400px;
          border-radius: 20px;
          overflow: hidden;
          background-image: url('{{ category.category_image.url }}');
          background-size: cover;
          background-position: center;
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
          transition: transform 0.4s ease, box-shadow 0.4s ease;"
          onmouseover="this.style.transform='scale(1.03)'; this.style.boxShadow='0 15px 30px rgba(0, 0, 0, 0.6)'"
          onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 10px 25px rgba(0, 0, 0, 0.4)'"
        >
          <div style="
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.55);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 20px;
          ">
            <p style="margin-bottom: 5px; color: rgba(255, 255, 255, 0.7); text-shadow: 1px 1px 6px rgba(0, 0, 0, 0.8);">
               {{ category.category_name|lower }}
            </p>
            <h4 style="font-weight: bold; color: white; font-size: 1.5rem; line-height: 1.4; word-break: break-word;">
              {{ category.category_name }}
            </h4>

            <!-- Updated link to use category slug -->
            <a href="{% url 'categoryPage' category.category_slug %}" style="margin-top: 10px; display: inline-block; padding: 8px 16px; color: white; border: 2px solid white; border-radius: 50px; text-decoration: none; font-weight: 500; transition: background-color 0.3s ease, color 0.3s ease;"
               onmouseover="this.style.backgroundColor='#00bcd4'; this.style.color='black'"
               onmouseout="this.style.backgroundColor='transparent'; this.style.color='white'">
              Explore Category
            </a>
          </div>
        </div>
      </div>
      {% empty %}
      <p class="text-center text-muted">No categories found.</p>
      {% endfor %}
    </div>
  </div>
</section>



{% endblock %}
